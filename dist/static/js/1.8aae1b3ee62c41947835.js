webpackJsonp([1],{ETjk:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={name:"KARMA",mixins:[{methods:{regNum:function(t){t.target.value=t.target.value.replace(/[^\d]/g,"")}}}],data:function(){return{data:{},active:0,address:"",userName:"wangsitu2134",powerUpQuantity:"",powerDownQuantity:"",permission:"active",total:"0.0000",powerUp:"0.0000",refunding:"0.0000"}},computed:{powerUpData:function(){return{actions:{account:"therealkarma",name:"powerup",authorization:[{actor:this.userName,permission:this.permission}],data:{owner:this.userName,quantity:this.powerUpQuantity+" KARMA"}},address:this.address,account:this.userName}},powerDownData:function(){return{actions:{account:"therealkarma",name:"powerdown",authorization:[{actor:this.userName,permission:this.permission}],data:{owner:this.userName,quantity:this.powerDownQuantity+" KARMA"}},address:this.address,account:this.userName}}},methods:{quantityCheck:function(t,a){return""===t?(Dialog.init(a+"数量不能为空"),!1):t<=0?(Dialog.init(a+"数量必须大于0"),!1):t>this.total&&"抵押"===a?(Dialog.init(a+"不能大于"+this.total),!1):!(t>this.powerUp&&"赎回"===a)||(Dialog.init(a+"不能大于"+this.powerUp),!1)},submitPowerUp:function(){this.quantityCheck(this.powerUpQuantity,"抵押")&&(this.powerUpQuantity=Number(this.powerUpQuantity).toFixed(4),console.log(this.powerUpData),this.$tp.pushEosAction(this.powerUpData).then(function(t){t.result?Dialog.init("抵押操作成功"):Dialog.init("抵押操作失败")}))},submitPowerDown:function(){this.quantityCheck(this.powerDownQuantity,"赎回")&&(this.powerDownQuantity=Number(this.powerDownQuantity).toFixed(4),this.$tp.pushEosAction(this.powerDownData).then(function(t){t.result?Dialog.init("赎回操作成功"):Dialog.init("赎回操作失败")}))},getRefundingTable:function(){var t=this;this.$tp.getTableRows({json:!0,code:"therealkarma",scope:this.userName,table:"refunding",lower_bound:"10",limit:500}).then(function(a){a.result&&a.data.rows.length>0&&(t.refunding=a.data.rows[0].quantity.replace(" KARMA",""))})},getPowerTable:function(){var t=this;this.$tp.getTableRows({json:!0,code:"therealkarma",scope:this.userName,table:"power",lower_bound:"10",limit:500}).then(function(a){a.result&&a.data.rows.length>0&&(t.powerUp=a.data.rows[0].quantity.replace(" KARMA",""))})},getBalance:function(){var t=this;this.$tp.getEosBalance({account:this.userName,contract:"therealkarma",symbol:"KARMA"}).then(function(a){a.result&&a.data.balance.length>0&&(t.total=a.data.balance[0].replace(" KARMA",""))})}},created:function(){var t=this;this.$tp.getCurrentWallet().then(function(a){a.result&&(t.address=a.data.address,t.userName=a.data.name,t.getBalance(),t.getRefundingTable(),t.getPowerTable())})}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"KARMA"},[e("header",[e("div",[t._v("Account："+t._s(t.userName))]),t._v(" "),e("p",[t._v("Total："+t._s(t.total)+" KARMA")]),t._v(" "),e("p",[t._v("Powered Up："+t._s(t.powerUp)+" KARMA")]),t._v(" "),e("p",[t._v("Refunding："+t._s(t.refunding)+" KARMA")])]),t._v(" "),e("main",[e("van-tabs",{model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[e("van-tab",{staticClass:"karma-tab",attrs:{title:"Power up"}},[e("div",{staticClass:"karma-title"},[t._v("\n          Power Up your KARMA -\n          "),e("small",[t._v("Earn more KARMA!")])]),t._v(" "),e("van-cell-group",[e("van-field",{attrs:{type:"number",required:"",clearable:"",label:"Quantity"},model:{value:t.powerUpQuantity,callback:function(a){t.powerUpQuantity=a},expression:"powerUpQuantity"}})],1),t._v(" "),e("div",[e("p",[t._v("By executing this action you are agreeing to the EOS constitution and this action's associated ricardian contract. The ricardian contract may be viewed in the Scatter approval prompt.")])]),t._v(" "),e("div",{staticClass:"txc"},[e("van-button",{staticClass:"karma-btn",attrs:{type:"default"},on:{click:t.submitPowerUp}},[t._v("POWER UP")])],1)],1),t._v(" "),e("van-tab",{staticClass:"karma-tab",attrs:{title:"Power down"}},[e("div",{staticClass:"karma-title"},[t._v("\n          Power Down your KARMA -\n          "),e("small",[t._v("You don't want more KARMA?")])]),t._v(" "),e("van-cell-group",[e("van-field",{attrs:{type:"number",required:"",clearable:"",label:"Quantity"},model:{value:t.powerDownQuantity,callback:function(a){t.powerDownQuantity=a},expression:"powerDownQuantity"}})],1),t._v(" "),e("div",[e("p",[t._v("By executing this action you are agreeing to the EOS constitution and this action's associated ricardian contract. The ricardian contract may be viewed in the Scatter approval prompt.")])]),t._v(" "),e("div",{staticClass:"txc"},[e("van-button",{staticClass:"karma-btn",attrs:{type:"default"},on:{click:t.submitPowerDown}},[t._v("POWER DOWN")])],1)],1)],1)],1)])},staticRenderFns:[]};var o=e("VU/8")(i,n,!1,function(t){e("uOaV")},"data-v-81d73898",null);a.default=o.exports},uOaV:function(t,a){}});
//# sourceMappingURL=1.8aae1b3ee62c41947835.js.map