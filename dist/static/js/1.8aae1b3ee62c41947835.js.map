{"version":3,"sources":["webpack:///./src/mixins/GlobalMethos.js","webpack:///src/views/KARMA.vue","webpack:///./src/views/KARMA.vue?6704","webpack:///./src/views/KARMA.vue"],"names":["KARMA","name","mixins","methods","regNum","e","target","value","replace","data","active","address","userName","powerUpQuantity","powerDownQuantity","permission","total","powerUp","refunding","computed","powerUpData","actions","account","authorization","actor","this","owner","quantity","powerDownData","quantityCheck","type","Dialog","init","submitPowerUp","Number","toFixed","console","log","$tp","pushEosAction","then","res","result","submitPowerDown","getRefundingTable","_this","getTableRows","json","code","scope","table","lower_bound","limit","rows","length","getPowerTable","_this2","getBalance","_this3","getEosBalance","contract","symbol","balance","created","_this4","getCurrentWallet","views_KARMA","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","model","callback","$$v","expression","attrs","title","required","clearable","label","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/1.8aae1b3ee62c41947835.js","sourcesContent":["const GlobalMethods = {\n  methods: {\n    regNum(e) {\n      e.target.value = e.target.value.replace(/[^\\d]/g, '');\n    }\n  }\n};\n\nexport default GlobalMethods;\n\n\n\n// WEBPACK FOOTER //\n// ./src/mixins/GlobalMethos.js","<template>\n  <div class=\"KARMA\">\n    <header>\n      <div>Account：{{userName}}</div>\n      <p>Total：{{total}} KARMA</p>\n      <p>Powered Up：{{powerUp}} KARMA</p>\n      <p>Refunding：{{refunding}} KARMA</p>\n    </header>\n\n    <main>\n      <van-tabs v-model=\"active\">\n        <van-tab title=\"Power up\" class=\"karma-tab\">\n          <div class=\"karma-title\">\n            Power Up your KARMA -\n            <small>Earn more KARMA!</small>\n          </div>\n\n          <van-cell-group>\n            <van-field type=\"number\" v-model=\"powerUpQuantity\" required clearable label=\"Quantity\"/>\n          </van-cell-group>\n\n          <div>\n            <p>By executing this action you are agreeing to the EOS constitution and this action's associated ricardian contract. The ricardian contract may be viewed in the Scatter approval prompt.</p>\n          </div>\n\n          <div class=\"txc\">\n            <van-button class=\"karma-btn\" type=\"default\" @click=\"submitPowerUp\">POWER UP</van-button>\n          </div>\n        </van-tab>\n\n        <van-tab title=\"Power down\" class=\"karma-tab\">\n          <div class=\"karma-title\">\n            Power Down your KARMA -\n            <small>You don't want more KARMA?</small>\n          </div>\n\n          <van-cell-group>\n            <van-field type=\"number\" v-model=\"powerDownQuantity\" required clearable label=\"Quantity\"/>\n          </van-cell-group>\n\n          <div>\n            <p>By executing this action you are agreeing to the EOS constitution and this action's associated ricardian contract. The ricardian contract may be viewed in the Scatter approval prompt.</p>\n          </div>\n\n          <div class=\"txc\">\n            <van-button class=\"karma-btn\" type=\"default\" @click=\"submitPowerDown\">POWER DOWN</van-button>\n          </div>\n\n        </van-tab>\n      </van-tabs>\n    </main>\n\n  </div>\n</template>\n\n<script>\n  import GlobalMethods from '../mixins/GlobalMethos';\n\n  export default {\n    name: \"KARMA\",\n    mixins: [GlobalMethods],\n    data() {\n      return {\n        data: {},\n        active: 0,\n        address: '',\n        userName: 'wangsitu2134',\n        powerUpQuantity: '',\n        powerDownQuantity: '',\n        permission: 'active',\n        total: '0.0000',\n        powerUp: '0.0000',\n        refunding: '0.0000'\n      }\n    },\n\n    computed: {\n      'powerUpData'() {\n        return {\n          actions: {\n            account: 'therealkarma',\n            name: 'powerup',\n            authorization: [\n              {\n                actor: this.userName,\n                permission: this.permission\n              }\n            ],\n            data: {\n              owner: this.userName,\n              quantity: `${this.powerUpQuantity} KARMA`\n            },\n          },\n          address: this.address,\n          account: this.userName\n        }\n      },\n\n      'powerDownData'() {\n        return {\n          actions: {\n            account: 'therealkarma',\n            name: 'powerdown',\n            authorization: [\n              {\n                actor: this.userName,\n                permission: this.permission\n              }\n            ],\n            data: {\n              owner: this.userName,\n              quantity: `${this.powerDownQuantity} KARMA`\n            },\n          },\n          address: this.address,\n          account: this.userName\n        }\n      }\n    },\n\n    methods: {\n      quantityCheck(quantity, type) {\n        if (quantity === '') {\n          Dialog.init(`${type}数量不能为空`);\n          return false;\n        }\n\n        if (quantity <= 0) {\n          Dialog.init(`${type}数量必须大于0`);\n          return false;\n        }\n\n        if (quantity > this.total && type === '抵押') {\n          Dialog.init(`${type}不能大于${this.total}`);\n          return false;\n        }\n\n        if (quantity > this.powerUp && type === '赎回') {\n          Dialog.init(`${type}不能大于${this.powerUp}`);\n          return false;\n        }\n\n        return true\n      },\n\n      submitPowerUp() {\n        if (this.quantityCheck(this.powerUpQuantity, '抵押')) {\n          this.powerUpQuantity = Number(this.powerUpQuantity).toFixed(4);\n          console.log(this.powerUpData);\n          this.$tp.pushEosAction(this.powerUpData).then(res => {\n            res.result ? Dialog.init('抵押操作成功') : Dialog.init('抵押操作失败');\n          });\n        }\n      },\n\n      submitPowerDown() {\n        if (this.quantityCheck(this.powerDownQuantity, '赎回')) {\n          this.powerDownQuantity = Number(this.powerDownQuantity).toFixed(4);\n          this.$tp.pushEosAction(this.powerDownData).then(res => {\n            res.result ? Dialog.init('赎回操作成功') : Dialog.init('赎回操作失败');\n          });\n        }\n      },\n\n      // 退回状态\n      getRefundingTable() {\n        this.$tp.getTableRows({\n          json: true,\n          code: 'therealkarma',\n          scope: this.userName,\n          table: 'refunding',\n          lower_bound: \"10\",\n          limit: 500\n        }).then(res => {\n          if (res.result) {\n            if (res.data.rows.length > 0) {\n              this.refunding = res.data.rows[0].quantity.replace(' KARMA', '');\n            }\n          }\n        });\n      },\n\n      // 抵押状态\n      getPowerTable() {\n        this.$tp.getTableRows({\n          json: true,\n          code: 'therealkarma',\n          scope: this.userName,\n          table: 'power',\n          lower_bound: \"10\",\n          limit: 500\n        }).then(res => {\n          if (res.result) {\n            // console.log(res, 2222);\n            if (res.data.rows.length > 0) {\n              this.powerUp = res.data.rows[0].quantity.replace(' KARMA', '');\n            }\n          }\n        });\n      },\n\n      // 获取当前余额\n      getBalance() {\n        this.$tp.getEosBalance({\n          account: this.userName,\n          contract: 'therealkarma',\n          symbol: 'KARMA'\n        }).then(res => {\n          if (res.result) {\n            // console.log(res, 3333);\n            if (res.data.balance.length > 0) {\n              this.total = res.data.balance[0].replace(' KARMA', '');\n            }\n          }\n        });\n      }\n    },\n\n    created() {\n      this.$tp.getCurrentWallet().then(res => {\n        if (res.result) {\n          this.address = res.data.address;\n          this.userName = res.data.name;\n          this.getBalance();\n          this.getRefundingTable();\n          this.getPowerTable();\n        }\n      });\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  header {\n    margin: 15px;\n    background: #434343;\n    padding: 15px;\n    border-radius: 10px;\n    box-shadow: 1px 1px 2px 1px #434343;\n    div {\n      color: #c1c1c1;\n      margin-bottom: 5px;\n    }\n\n    p {\n      color: #fff;\n      font-size: 18px;\n      margin: 10px 0 0;\n    }\n  }\n\n  main {\n    .karma-tab {\n      padding: 0 15px;\n    }\n\n    .karma-title {\n      margin: 15px 0;\n    }\n\n    .karma-btn {\n      background: #e91e63;\n      color: #fff;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/KARMA.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"KARMA\"},[_c('header',[_c('div',[_vm._v(\"Account：\"+_vm._s(_vm.userName))]),_vm._v(\" \"),_c('p',[_vm._v(\"Total：\"+_vm._s(_vm.total)+\" KARMA\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Powered Up：\"+_vm._s(_vm.powerUp)+\" KARMA\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Refunding：\"+_vm._s(_vm.refunding)+\" KARMA\")])]),_vm._v(\" \"),_c('main',[_c('van-tabs',{model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('van-tab',{staticClass:\"karma-tab\",attrs:{\"title\":\"Power up\"}},[_c('div',{staticClass:\"karma-title\"},[_vm._v(\"\\n          Power Up your KARMA -\\n          \"),_c('small',[_vm._v(\"Earn more KARMA!\")])]),_vm._v(\" \"),_c('van-cell-group',[_c('van-field',{attrs:{\"type\":\"number\",\"required\":\"\",\"clearable\":\"\",\"label\":\"Quantity\"},model:{value:(_vm.powerUpQuantity),callback:function ($$v) {_vm.powerUpQuantity=$$v},expression:\"powerUpQuantity\"}})],1),_vm._v(\" \"),_c('div',[_c('p',[_vm._v(\"By executing this action you are agreeing to the EOS constitution and this action's associated ricardian contract. The ricardian contract may be viewed in the Scatter approval prompt.\")])]),_vm._v(\" \"),_c('div',{staticClass:\"txc\"},[_c('van-button',{staticClass:\"karma-btn\",attrs:{\"type\":\"default\"},on:{\"click\":_vm.submitPowerUp}},[_vm._v(\"POWER UP\")])],1)],1),_vm._v(\" \"),_c('van-tab',{staticClass:\"karma-tab\",attrs:{\"title\":\"Power down\"}},[_c('div',{staticClass:\"karma-title\"},[_vm._v(\"\\n          Power Down your KARMA -\\n          \"),_c('small',[_vm._v(\"You don't want more KARMA?\")])]),_vm._v(\" \"),_c('van-cell-group',[_c('van-field',{attrs:{\"type\":\"number\",\"required\":\"\",\"clearable\":\"\",\"label\":\"Quantity\"},model:{value:(_vm.powerDownQuantity),callback:function ($$v) {_vm.powerDownQuantity=$$v},expression:\"powerDownQuantity\"}})],1),_vm._v(\" \"),_c('div',[_c('p',[_vm._v(\"By executing this action you are agreeing to the EOS constitution and this action's associated ricardian contract. The ricardian contract may be viewed in the Scatter approval prompt.\")])]),_vm._v(\" \"),_c('div',{staticClass:\"txc\"},[_c('van-button',{staticClass:\"karma-btn\",attrs:{\"type\":\"default\"},on:{\"click\":_vm.submitPowerDown}},[_vm._v(\"POWER DOWN\")])],1)],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-81d73898\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/KARMA.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-81d73898\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./KARMA.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./KARMA.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./KARMA.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-81d73898\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./KARMA.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-81d73898\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/KARMA.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}