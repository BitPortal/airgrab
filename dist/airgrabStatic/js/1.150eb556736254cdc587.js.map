{"version":3,"sources":["webpack:///./src/mixins/GlobalMethos.js","webpack:///src/views/KARMA.vue","webpack:///./src/views/KARMA.vue?e703","webpack:///./src/views/KARMA.vue"],"names":["KARMA","name","mixins","methods","regNum","e","target","value","replace","data","active","address","userName","powerUpQuantity","powerDownQuantity","permission","total","powerUp","refunding","computed","powerUpData","actions","account","authorization","actor","this","owner","quantity","powerDownData","quantityCheck","type","$dialog","alert","message","submitPowerUp","_this","Number","toFixed","console","log","$tp","pushEosAction","then","res","result","getInfo","submitPowerDown","_this2","getRefundingTable","_this3","getTableRows","json","code","scope","table","lower_bound","limit","rows","length","getPowerTable","_this4","getBalance","_this5","getEosBalance","contract","symbol","balance","_this6","getCurrentWallet","created","views_KARMA","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","_e","model","callback","$$v","expression","attrs","title","required","clearable","label","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"airgrabStatic/js/1.150eb556736254cdc587.js","sourcesContent":["const GlobalMethods = {\n  methods: {\n    regNum(e) {\n      e.target.value = e.target.value.replace(/[^\\d]/g, '');\n    }\n  }\n};\n\nexport default GlobalMethods;\n\n\n\n// WEBPACK FOOTER //\n// ./src/mixins/GlobalMethos.js","<template>\n  <div class=\"KARMA\">\n    <header>\n      <div>Account：{{userName}}</div>\n      <p>Total：{{total}} KARMA</p>\n      <p>Powered Up：{{powerUp}} KARMA</p>\n      <p>Refunding：{{refunding}} KARMA</p>\n      <p v-if=\"powerUp > 0\">Reward time </p>\n    </header>\n\n    <main>\n      <van-tabs v-model=\"active\">\n        <van-tab title=\"Power up\" class=\"karma-tab\">\n          <div class=\"karma-title\">\n            Power Up your KARMA -\n            <small>Earn more KARMA!</small>\n          </div>\n\n          <van-cell-group>\n            <van-field type=\"number\" v-model=\"powerUpQuantity\" required clearable label=\"Quantity\"/>\n          </van-cell-group>\n\n          <div>\n            <p>By executing this action you are agreeing to the EOS constitution and this action's associated ricardian contract. The ricardian contract may be viewed in the Scatter approval prompt.</p>\n          </div>\n\n          <div class=\"txc\">\n            <van-button class=\"karma-btn\" type=\"default\" @click=\"submitPowerUp\">POWER UP</van-button>\n          </div>\n        </van-tab>\n\n        <van-tab title=\"Power down\" class=\"karma-tab\">\n          <div class=\"karma-title\">\n            Power Down your KARMA -\n            <small>You don't want more KARMA?</small>\n          </div>\n\n          <van-cell-group>\n            <van-field type=\"number\" v-model=\"powerDownQuantity\" required clearable label=\"Quantity\"/>\n          </van-cell-group>\n\n          <div>\n            <p>By executing this action you are agreeing to the EOS constitution and this action's associated ricardian contract. The ricardian contract may be viewed in the Scatter approval prompt.</p>\n          </div>\n\n          <div class=\"txc\">\n            <van-button class=\"karma-btn\" type=\"default\" @click=\"submitPowerDown\">POWER DOWN</van-button>\n          </div>\n\n        </van-tab>\n      </van-tabs>\n    </main>\n\n  </div>\n</template>\n\n<script>\n  import GlobalMethods from '../mixins/GlobalMethos';\n\n  export default {\n    name: \"KARMA\",\n    mixins: [GlobalMethods],\n    data() {\n      return {\n        data: {},\n        active: 0,\n        address: '',\n        userName: '',\n        powerUpQuantity: '',\n        powerDownQuantity: '',\n        permission: 'active',\n        total: '0.0000',\n        powerUp: '0.0000',\n        refunding: '0.0000'\n      }\n    },\n\n    computed: {\n      'powerUpData'() {\n        return {\n          actions: [\n            {\n              account: 'therealkarma',\n              name: 'powerup',\n              authorization: [\n                {\n                  actor: this.userName,\n                  permission: this.permission\n                }\n              ],\n              data: {\n                owner: this.userName,\n                quantity: `${this.powerUpQuantity} KARMA`\n              }\n            }\n          ],\n          address: this.address,\n          account: this.userName\n        }\n      },\n\n      'powerDownData'() {\n        return {\n          actions: [\n            {\n              account: 'therealkarma',\n              name: 'powerdown',\n              authorization: [\n                {\n                  actor: this.userName,\n                  permission: this.permission\n                }\n              ],\n              data: {\n                owner: this.userName,\n                quantity: `${this.powerDownQuantity} KARMA`\n              }\n            }\n          ],\n          address: this.address,\n          account: this.userName\n        }\n      }\n    },\n\n    methods: {\n      quantityCheck(quantity, type) {\n        if (quantity === '') {\n          this.$dialog.alert({message: `${type}数量不能为空`});\n          return false;\n        }\n\n        if (quantity <= 0) {\n          this.$dialog.alert({message: `${type}数量必须大于0`});\n          return false;\n        }\n\n        if (quantity > this.total && type === '抵押') {\n          this.$dialog.alert({message: `${type}不能大于${this.total}`});\n          return false;\n        }\n\n        if (quantity > this.powerUp && type === '赎回') {\n          this.$dialog.alert({message: `${type}不能大于${this.powerUp}`});\n          return false;\n        }\n\n        return true\n      },\n\n      submitPowerUp() {\n        if (this.quantityCheck(this.powerUpQuantity, '抵押')) {\n          this.powerUpQuantity = Number(this.powerUpQuantity).toFixed(4);\n          console.log(this.powerUpData);\n          this.$tp.pushEosAction(this.powerUpData).then(res => {\n            if (res.result) {\n              this.getInfo();\n            }\n            // res.result ? this.$dialog.alert({message: '抵押操作成功'}) : this.$dialog.alert({message: '抵押操作失败'});\n          });\n        }\n      },\n\n      submitPowerDown() {\n        if (this.quantityCheck(this.powerDownQuantity, '赎回')) {\n          this.powerDownQuantity = Number(this.powerDownQuantity).toFixed(4);\n          this.$tp.pushEosAction(this.powerDownData).then(res => {\n            if (res.result) {\n              this.getInfo();\n            }\n            // res.result ? this.$dialog.alert({message: '赎回操作成功'}) : this.$dialog.alert({message: '赎回操作失败'});\n          });\n        }\n      },\n\n      // 退回状态\n      getRefundingTable() {\n        this.$tp.getTableRows({\n          json: true,\n          code: 'therealkarma',\n          scope: this.userName,\n          table: 'refunding',\n          lower_bound: \"10\",\n          limit: 500\n        }).then(res => {\n          if (res.result) {\n            if (res.data.rows.length > 0) {\n              this.refunding = res.data.rows[0].quantity.replace(' KARMA', '');\n            }\n          }\n        });\n      },\n\n      // 抵押状态\n      getPowerTable() {\n        this.$tp.getTableRows({\n          json: true,\n          code: 'therealkarma',\n          scope: this.userName,\n          table: 'power',\n          lower_bound: \"10\",\n          limit: 500\n        }).then(res => {\n          if (res.result) {\n            console.log(res, 2222);\n            if (res.data.rows.length > 0) {\n              this.powerUp = res.data.rows[0].quantity.replace(' KARMA', '');\n            }\n          }\n        });\n      },\n\n      // 获取当前余额\n      getBalance() {\n        this.$tp.getEosBalance({\n          account: this.userName,\n          contract: 'therealkarma',\n          symbol: 'KARMA'\n        }).then(res => {\n          if (res.result) {\n            // console.log(res, 3333);\n            if (res.data.balance.length > 0) {\n              this.total = res.data.balance[0].replace(' KARMA', '');\n            }\n          }\n        });\n      },\n\n      getInfo() {\n        this.$tp.getCurrentWallet().then(res => {\n          if (res.result) {\n            this.address = res.data.address;\n            this.userName = res.data.name;\n            this.getBalance();\n            this.getRefundingTable();\n            this.getPowerTable();\n          }\n        });\n      }\n    },\n\n    created() {\n      this.getInfo();\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  header {\n    margin: 15px;\n    background: #434343;\n    padding: 15px;\n    border-radius: 10px;\n    box-shadow: 1px 1px 2px 1px #434343;\n    div {\n      color: #c1c1c1;\n      margin-bottom: 5px;\n    }\n\n    p {\n      color: #fff;\n      font-size: 18px;\n      margin: 10px 0 0;\n    }\n  }\n\n  main {\n    .karma-tab {\n      padding: 0 15px;\n    }\n\n    .karma-title {\n      margin: 15px 0;\n    }\n\n    .karma-btn {\n      background: #e91e63;\n      color: #fff;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/KARMA.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"KARMA\"},[_c('header',[_c('div',[_vm._v(\"Account：\"+_vm._s(_vm.userName))]),_vm._v(\" \"),_c('p',[_vm._v(\"Total：\"+_vm._s(_vm.total)+\" KARMA\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Powered Up：\"+_vm._s(_vm.powerUp)+\" KARMA\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Refunding：\"+_vm._s(_vm.refunding)+\" KARMA\")]),_vm._v(\" \"),(_vm.powerUp > 0)?_c('p',[_vm._v(\"Reward time \")]):_vm._e()]),_vm._v(\" \"),_c('main',[_c('van-tabs',{model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('van-tab',{staticClass:\"karma-tab\",attrs:{\"title\":\"Power up\"}},[_c('div',{staticClass:\"karma-title\"},[_vm._v(\"\\n          Power Up your KARMA -\\n          \"),_c('small',[_vm._v(\"Earn more KARMA!\")])]),_vm._v(\" \"),_c('van-cell-group',[_c('van-field',{attrs:{\"type\":\"number\",\"required\":\"\",\"clearable\":\"\",\"label\":\"Quantity\"},model:{value:(_vm.powerUpQuantity),callback:function ($$v) {_vm.powerUpQuantity=$$v},expression:\"powerUpQuantity\"}})],1),_vm._v(\" \"),_c('div',[_c('p',[_vm._v(\"By executing this action you are agreeing to the EOS constitution and this action's associated ricardian contract. The ricardian contract may be viewed in the Scatter approval prompt.\")])]),_vm._v(\" \"),_c('div',{staticClass:\"txc\"},[_c('van-button',{staticClass:\"karma-btn\",attrs:{\"type\":\"default\"},on:{\"click\":_vm.submitPowerUp}},[_vm._v(\"POWER UP\")])],1)],1),_vm._v(\" \"),_c('van-tab',{staticClass:\"karma-tab\",attrs:{\"title\":\"Power down\"}},[_c('div',{staticClass:\"karma-title\"},[_vm._v(\"\\n          Power Down your KARMA -\\n          \"),_c('small',[_vm._v(\"You don't want more KARMA?\")])]),_vm._v(\" \"),_c('van-cell-group',[_c('van-field',{attrs:{\"type\":\"number\",\"required\":\"\",\"clearable\":\"\",\"label\":\"Quantity\"},model:{value:(_vm.powerDownQuantity),callback:function ($$v) {_vm.powerDownQuantity=$$v},expression:\"powerDownQuantity\"}})],1),_vm._v(\" \"),_c('div',[_c('p',[_vm._v(\"By executing this action you are agreeing to the EOS constitution and this action's associated ricardian contract. The ricardian contract may be viewed in the Scatter approval prompt.\")])]),_vm._v(\" \"),_c('div',{staticClass:\"txc\"},[_c('van-button',{staticClass:\"karma-btn\",attrs:{\"type\":\"default\"},on:{\"click\":_vm.submitPowerDown}},[_vm._v(\"POWER DOWN\")])],1)],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7da7a48b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/KARMA.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7da7a48b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./KARMA.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./KARMA.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./KARMA.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7da7a48b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./KARMA.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7da7a48b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/KARMA.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}